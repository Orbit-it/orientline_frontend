{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\Mansour\\\\Desktop\\\\OrientLine\\\\app\\\\app\\\\screens\\\\ListingEditScreen.js\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState } from \"react\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport * as Yup from \"yup\";\nimport CategoryPickerItem from \"../components/CategoryPickerItem\";\nimport { Form, FormField, FormPicker, FormImagePicker, SubmitButton } from \"../components/forms\";\nimport Screen from \"../components/Screen\";\nimport listingsApi from \"../api/listings\";\nimport useLocation from \"../hooks/useLocation\";\nimport UploadScreen from \"./UploadScreen\";\nvar validationSchema = Yup.object().shape({\n  title: Yup.string().required().min(1).label(\"Titre\"),\n  price: Yup.number().required().min(1).max(10000).label(\"Prix\"),\n  description: Yup.string().label(\"Description\"),\n  category: Yup.object().required().nullable().label(\"Categorie\"),\n  images: Yup.array().min(1, \"Selectionner au moins une image.\")\n});\nvar categories = [{\n  backgroundColor: \"#fc5c65\",\n  icon: \"floor-lamp\",\n  label: \"Furniture\",\n  value: 1\n}, {\n  backgroundColor: \"#fd9644\",\n  icon: \"car\",\n  label: \"Voiture\",\n  value: 2\n}, {\n  backgroundColor: \"#fed330\",\n  icon: \"camera\",\n  label: \"Cameras\",\n  value: 3\n}, {\n  backgroundColor: \"#26de81\",\n  icon: \"cards\",\n  label: \"Jeux\",\n  value: 4\n}, {\n  backgroundColor: \"#2bcbba\",\n  icon: \"shoe-heel\",\n  label: \"Habillement\",\n  value: 5\n}, {\n  backgroundColor: \"#45aaf2\",\n  icon: \"basketball\",\n  label: \"Sports\",\n  value: 6\n}, {\n  backgroundColor: \"#4b7bec\",\n  icon: \"headphones\",\n  label: \"Film & Musique\",\n  value: 7\n}, {\n  backgroundColor: \"#a55eea\",\n  icon: \"book-open-variant\",\n  label: \"Livres\",\n  value: 8\n}, {\n  backgroundColor: \"#778ca3\",\n  icon: \"application\",\n  label: \"Autre\",\n  value: 9\n}];\n\nfunction ListingEditScreen() {\n  var location = useLocation();\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      uploadVisible = _useState2[0],\n      setUploadVisible = _useState2[1];\n\n  var _useState3 = useState(0),\n      _useState4 = _slicedToArray(_useState3, 2),\n      progress = _useState4[0],\n      setProgress = _useState4[1];\n\n  var handleSubmit = function handleSubmit(listing, _ref) {\n    var resetForm, result;\n    return _regeneratorRuntime.async(function handleSubmit$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            resetForm = _ref.resetForm;\n            setProgress(0);\n            setUploadVisible(true);\n            _context.next = 5;\n            return _regeneratorRuntime.awrap(listingsApi.addListing(_objectSpread(_objectSpread({}, listing), {}, {\n              location: location\n            }), function (progress) {\n              return setProgress(progress);\n            }));\n\n          case 5:\n            result = _context.sent;\n\n            if (result.ok) {\n              _context.next = 9;\n              break;\n            }\n\n            setUploadVisible(false);\n            return _context.abrupt(\"return\", alert(\"Could not save the listing\"));\n\n          case 9:\n            resetForm();\n\n          case 10:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  return React.createElement(Screen, {\n    style: styles.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 3\n    }\n  }, React.createElement(UploadScreen, {\n    onDone: function onDone() {\n      return setUploadVisible(false);\n    },\n    progress: progress,\n    visible: uploadVisible,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 4\n    }\n  }), React.createElement(Form, {\n    initialValues: {\n      title: \"\",\n      description: \"\",\n      images: []\n    },\n    onSubmit: handleSubmit,\n    validationSchema: validationSchema,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 4\n    }\n  }, React.createElement(FormImagePicker, {\n    name: \"images\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 5\n    }\n  }), React.createElement(FormField, {\n    maxLength: 255,\n    name: \"title\",\n    placeholder: \"Titre\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 5\n    }\n  }), React.createElement(FormField, {\n    name: \"description\",\n    placeholder: \"Contenue\",\n    maxLength: 255,\n    multiline: true,\n    numberOfLines: 7,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 5\n    }\n  }), React.createElement(SubmitButton, {\n    title: \"Publier\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 5\n    }\n  })));\n}\n\nvar styles = StyleSheet.create({\n  container: {\n    padding: 10\n  }\n});\nexport default ListingEditScreen;","map":{"version":3,"sources":["C:/Users/Mansour/Desktop/OrientLine/app/app/screens/ListingEditScreen.js"],"names":["React","useState","Yup","CategoryPickerItem","Form","FormField","FormPicker","FormImagePicker","SubmitButton","Screen","listingsApi","useLocation","UploadScreen","validationSchema","object","shape","title","string","required","min","label","price","number","max","description","category","nullable","images","array","categories","backgroundColor","icon","value","ListingEditScreen","location","uploadVisible","setUploadVisible","progress","setProgress","handleSubmit","listing","resetForm","addListing","result","ok","alert","styles","container","StyleSheet","create","padding"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { StyleSheet } from \"react-native\";\nimport * as Yup from \"yup\";\n\n\n\n\n/* FormPicker\n\t\t\t\t\tname=\"category\"\n\t\t\t\t\tplaceholder=\"Categorie\"\n\t\t\t\t\titems={categories}\n\t\t\t\t\tnumberOfColumns={3}\n\t\t\t\t\tPickerItemComponent={CategoryPickerItem}\n\t\t\t\t\twidth=\"50%\"\n\n\t\t\t\t\t<FormField\n\t\t\t\t\tname=\"price\"\n\t\t\t\t\tplaceholder=\"Prix\"\n\t\t\t\t\tmaxLength={8}\n\t\t\t\t\twidth={120}\n\t\t\t\t\tkeyboardType=\"numeric\"\n\t\t\t\t/>\n\t\t\t\t*/\n\nimport CategoryPickerItem from \"../components/CategoryPickerItem\";\nimport {\n\tForm,\n\tFormField,\n\tFormPicker,\n\tFormImagePicker,\n\tSubmitButton,\n} from \"../components/forms\";\nimport Screen from \"../components/Screen\";\nimport listingsApi from \"../api/listings\";\nimport useLocation from \"../hooks/useLocation\";\n\nimport UploadScreen from \"./UploadScreen\";\n\nconst validationSchema = Yup.object().shape({\n\ttitle: Yup.string().required().min(1).label(\"Titre\"),\n\tprice: Yup.number().required().min(1).max(10000).label(\"Prix\"),\n\tdescription: Yup.string().label(\"Description\"),\n\tcategory: Yup.object().required().nullable().label(\"Categorie\"),\n\timages: Yup.array().min(1, \"Selectionner au moins une image.\"),\n});\n\nconst categories = [\n\t{\n\t\tbackgroundColor: \"#fc5c65\",\n\t\ticon: \"floor-lamp\",\n\t\tlabel: \"Furniture\",\n\t\tvalue: 1,\n\t},\n\t{\n\t\tbackgroundColor: \"#fd9644\",\n\t\ticon: \"car\",\n\t\tlabel: \"Voiture\",\n\t\tvalue: 2,\n\t},\n\t{\n\t\tbackgroundColor: \"#fed330\",\n\t\ticon: \"camera\",\n\t\tlabel: \"Cameras\",\n\t\tvalue: 3,\n\t},\n\t{\n\t\tbackgroundColor: \"#26de81\",\n\t\ticon: \"cards\",\n\t\tlabel: \"Jeux\",\n\t\tvalue: 4,\n\t},\n\t{\n\t\tbackgroundColor: \"#2bcbba\",\n\t\ticon: \"shoe-heel\",\n\t\tlabel: \"Habillement\",\n\t\tvalue: 5,\n\t},\n\t{\n\t\tbackgroundColor: \"#45aaf2\",\n\t\ticon: \"basketball\",\n\t\tlabel: \"Sports\",\n\t\tvalue: 6,\n\t},\n\t{\n\t\tbackgroundColor: \"#4b7bec\",\n\t\ticon: \"headphones\",\n\t\tlabel: \"Film & Musique\",\n\t\tvalue: 7,\n\t},\n\t{\n\t\tbackgroundColor: \"#a55eea\",\n\t\ticon: \"book-open-variant\",\n\t\tlabel: \"Livres\",\n\t\tvalue: 8,\n\t},\n\t{\n\t\tbackgroundColor: \"#778ca3\",\n\t\ticon: \"application\",\n\t\tlabel: \"Autre\",\n\t\tvalue: 9,\n\t},\n];\n\nfunction ListingEditScreen() {\n\tconst location = useLocation();\n\tconst [uploadVisible, setUploadVisible] = useState(false);\n\tconst [progress, setProgress] = useState(0);\n\n\tconst handleSubmit = async (listing, { resetForm }) => {\n\t\tsetProgress(0);\n\t\tsetUploadVisible(true);\n\t\tconst result = await listingsApi.addListing(\n\t\t\t{ ...listing, location },\n\t\t\t(progress) => setProgress(progress)\n\t\t);\n\n\t\tif (!result.ok) {\n\t\t\tsetUploadVisible(false);\n\t\t\treturn alert(\"Could not save the listing\");\n\t\t}\n\n\t\tresetForm();\n\t};\n\n\treturn (\n\t\t<Screen style={styles.container}>\n\t\t\t<UploadScreen\n\t\t\t\tonDone={() => setUploadVisible(false)}\n\t\t\t\tprogress={progress}\n\t\t\t\tvisible={uploadVisible}\n\t\t\t/>\n\t\t\t<Form\n\t\t\t\tinitialValues={{\n\t\t\t\t\ttitle: \"\",\n\t\t\t\t\t//price: \"\",\n\t\t\t\t\tdescription: \"\",\n\t\t\t\t\t//category: null,\n\t\t\t\t\timages: [],\n\t\t\t\t}}\n\t\t\t\tonSubmit={handleSubmit}\n\t\t\t\tvalidationSchema={validationSchema}\n\t\t\t>\n\t\t\t\t<FormImagePicker name=\"images\" />\n\n\t\t\t\t<FormField maxLength={255} name=\"title\" placeholder=\"Titre\" />\n\n\t\t\t\t\n\t\t\t\t\n\n\t\t\t\t<FormField\n\t\t\t\t\tname=\"description\"\n\t\t\t\t\tplaceholder=\"Contenue\"\n\t\t\t\t\tmaxLength={255}\n\t\t\t\t\tmultiline={true}\n\t\t\t\t\tnumberOfLines={7}\n\t\t\t\t/>\n\t\t\t\t<SubmitButton title=\"Publier\" />\n\t\t\t</Form>\n\t\t</Screen>\n\t);\n}\n\nconst styles = StyleSheet.create({\n\tcontainer: {\n\t\tpadding: 10,\n\t},\n});\n\nexport default ListingEditScreen;\n"]},"metadata":{},"sourceType":"module"}